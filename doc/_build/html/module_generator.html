<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>the module generator &mdash; pyLBM v0 Manual</title>
    
    <link rel="stylesheet" type="text/css" href="_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="_static/css/spc-extend.css">
    <link rel="stylesheet" href="_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'v0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/copybutton.js"></script>
    <link rel="top" title="pyLBM v0 Manual" href="index.html" >
    <link rel="next" title="the class Simulation" href="class_simulation.html" >
    <link rel="prev" title="the class Scheme" href="class_scheme.html" > 
  </head>
  <body>

<div class="container">
  <!--
  <div class="top-scipy-org-logo-header">
    <a href="index.html">
      <img style="border: 0;" alt="SciPy" src="_static/img/pyLBM_logo.gif"></a>
    </div>
  </div>
  -->
  <H1>pyLBM</H1> Lattice Boltzmann solver
</div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
        <li class="active"><a href="http://math.u-psud.fr/~pyLBM">pyLBM</a></li>
        <li class="active"><a href="http://math.u-psud.fr/~pyLBM/doc">Docs</a></li>
	
        <li class="active"><a href="index.html">pyLBM v0 Manual</a></li>
	 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="class_simulation.html" title="the class Simulation"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="class_scheme.html" title="the class Scheme"
           accesskey="P">previous</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="the-module-generator">
<h1>the module generator<a class="headerlink" href="#the-module-generator" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="pyLBM.generator.Generator">
<em class="property">class </em><code class="descclassname">pyLBM.generator.</code><code class="descname">Generator</code><span class="sig-paren">(</span><em>build_dir=None</em>, <em>suffix='.py'</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.Generator" title="Permalink to this definition">¶</a></dt>
<dd><p>the generic class to generate the code</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>build_dir</strong> : string, optional</p>
<blockquote>
<div><p>the directory where the code is written</p>
</div></blockquote>
<p><strong>suffix</strong> : string, optional</p>
<blockquote class="last">
<div><p>the suffix of the file where the code is written</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>With pyLBM, the code can be generated in several langages.
Each phase of the Lattice Boltzmann Method
(as transport, relaxation, f2m, m2f, ...) is treated by an optimzed
function written, compiled, and executed by the generator.</p>
<p>The generated code can be read by typesetting the attribute
<code class="docutils literal"><span class="pre">code</span></code>.</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>build_dir</td>
<td>(string) the directory where the code is written</td>
</tr>
<tr class="row-even"><td>f</td>
<td>(file identifier) the file where the code is written</td>
</tr>
<tr class="row-odd"><td>code</td>
<td>(string) the generated code</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>setup :</td>
<td>default setup function (empty)</td>
</tr>
<tr class="row-even"><td>f2m :</td>
<td>default f2m function (empty)</td>
</tr>
<tr class="row-odd"><td>m2f :</td>
<td>default m2f function (empty)</td>
</tr>
<tr class="row-even"><td>transport :</td>
<td>default transport function (empty)</td>
</tr>
<tr class="row-odd"><td>relaxation :</td>
<td>default relaxation function (empty)</td>
</tr>
<tr class="row-even"><td>onetimestep :</td>
<td>defulat one time step function (empty)</td>
</tr>
<tr class="row-odd"><td>compile :</td>
<td>default compile function (writte the code in the file)</td>
</tr>
<tr class="row-even"><td>get_module :</td>
<td>get the name of the file where the code is written</td>
</tr>
<tr class="row-odd"><td>exit :</td>
<td>exit function that erases the code</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="module-pyLBM.generator"></span><dl class="class">
<dt id="pyLBM.generator.CythonGenerator">
<em class="property">class </em><code class="descclassname">pyLBM.generator.</code><code class="descname">CythonGenerator</code><span class="sig-paren">(</span><em>build_dir=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.CythonGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>generate the code by using <a class="reference external" href="http://cython.org">Cython</a>,
subclass of <a class="reference internal" href="#pyLBM.generator.Generator" title="pyLBM.generator.Generator"><code class="xref py py-class docutils literal"><span class="pre">Generator</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>build_dir</strong> : string, optional</p>
<blockquote class="last">
<div><p>the directory where the code has to be written</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This generator can be used if cython is installed and is more
efficient than <a class="reference internal" href="#pyLBM.generator.NumpyGenerator" title="pyLBM.generator.NumpyGenerator"><code class="xref py py-class docutils literal"><span class="pre">NumpyGenerator</span></code></a></p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>build_dir</td>
<td>(string) the directory where the code is written</td>
</tr>
<tr class="row-even"><td>f</td>
<td>(file identifier) the file where the code is written</td>
</tr>
<tr class="row-odd"><td>code</td>
<td>(string) the generated code</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>setup :</td>
<td>setup function to import the module numba</td>
</tr>
<tr class="row-even"><td>transport :</td>
<td>generate the code of the transport phase</td>
</tr>
<tr class="row-odd"><td>relaxation :</td>
<td>generate the code of the relaxation phase</td>
</tr>
<tr class="row-even"><td>equilibrium :</td>
<td>generate the code of the equilibrium</td>
</tr>
<tr class="row-odd"><td>m2f :</td>
<td>generate the code to compute the distribution functions from the moments</td>
</tr>
<tr class="row-even"><td>f2m :</td>
<td>generate the code to compute the moments from the distribution functions</td>
</tr>
<tr class="row-odd"><td>onetimestep :</td>
<td>generate the code to compute one time step of the Lattice Boltzmann method</td>
</tr>
<tr class="row-even"><td>compile :</td>
<td>compile the cython code</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pyLBM.generator.CythonGenerator.compile">
<code class="descname">compile</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.CythonGenerator.compile" title="Permalink to this definition">¶</a></dt>
<dd><p>compile the cython code by using the module
<a class="reference external" href="http://docs.cython.org/src/reference/compilation.html">pyximport</a></p>
<p class="rubric">Notes</p>
<p>The default options of the compilation are -O3 and -w.
If the compilation can use the option -fopenmp, add it here.</p>
</dd></dl>

<dl class="method">
<dt id="pyLBM.generator.CythonGenerator.equilibrium">
<code class="descname">equilibrium</code><span class="sig-paren">(</span><em>ns</em>, <em>stencil</em>, <em>eq</em>, <em>la</em>, <em>dtype='f8'</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.CythonGenerator.equilibrium" title="Permalink to this definition">¶</a></dt>
<dd><p>generate the code of the projection on the equilibrium</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>ns</strong> : int</p>
<blockquote>
<div><p>the number of elementary schemes</p>
</div></blockquote>
<p><strong>stencil</strong> : <a class="reference internal" href="class_stencil.html#pyLBM.stencil.Stencil" title="pyLBM.stencil.Stencil"><code class="xref py py-class docutils literal"><span class="pre">Stencil</span></code></a></p>
<blockquote>
<div><p>the stencil of velocities</p>
</div></blockquote>
<p><strong>eq</strong> : sympy matrix</p>
<blockquote>
<div><p>the equilibrium (formally given)</p>
</div></blockquote>
<p><strong>la</strong> : double</p>
<blockquote>
<div><p>the value of the scheme velocity (dx/dt)</p>
</div></blockquote>
<p><strong>dtype</strong> : string, optional</p>
<blockquote>
<div><p>the type of the data (default &#8216;f8&#8217;)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>code</strong> : string</p>
<blockquote class="last">
<div><p>add the equilibrium function in the attribute <code class="docutils literal"><span class="pre">code</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyLBM.generator.CythonGenerator.f2m">
<code class="descname">f2m</code><span class="sig-paren">(</span><em>A</em>, <em>k</em>, <em>dim</em>, <em>dtype='double'</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.CythonGenerator.f2m" title="Permalink to this definition">¶</a></dt>
<dd><p>generate the code to compute the moments from the distribution functions</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>A</strong> : numpy array</p>
<blockquote>
<div><p>the matrix M in the d&#8217;Humieres framework</p>
</div></blockquote>
<p><strong>k</strong> : int</p>
<blockquote>
<div><p>the number of the stencil for which the code has to be generated</p>
</div></blockquote>
<p><strong>dim</strong> : int</p>
<blockquote>
<div><p>the space dimension (unused)</p>
</div></blockquote>
<p><strong>dtype</strong> : string, optional</p>
<blockquote>
<div><p>the type of the data (default &#8216;f8&#8217;)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>code</strong> : string</p>
<blockquote class="last">
<div><p>add the f2m function in the attribute <code class="docutils literal"><span class="pre">code</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>For the CythonGenerator, it seems to be more efficient
to generate one function for the global scheme
because the index corresponding to the stencil is the last index.</p>
</dd></dl>

<dl class="method">
<dt id="pyLBM.generator.CythonGenerator.m2f">
<code class="descname">m2f</code><span class="sig-paren">(</span><em>A</em>, <em>k</em>, <em>dim</em>, <em>dtype='double'</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.CythonGenerator.m2f" title="Permalink to this definition">¶</a></dt>
<dd><p>generate the code to compute the distribution functions from the moments</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>A</strong> : numpy array</p>
<blockquote>
<div><p>the matrix M^(-1) in the d&#8217;Humieres framework</p>
</div></blockquote>
<p><strong>k</strong> : int</p>
<blockquote>
<div><p>the number of the stencil for which the code has to be generated</p>
</div></blockquote>
<p><strong>dim</strong> : int</p>
<blockquote>
<div><p>the space dimension (unused)</p>
</div></blockquote>
<p><strong>dtype</strong> : string, optional</p>
<blockquote>
<div><p>the type of the data (default &#8216;f8&#8217;)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>code</strong> : string</p>
<blockquote class="last">
<div><p>add the m2f function in the attribute <code class="docutils literal"><span class="pre">code</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>For the CythonGenerator, it seems to be more efficient
to generate one function for the global scheme
because the index corresponding to the stencil is the last index.</p>
</dd></dl>

<dl class="method">
<dt id="pyLBM.generator.CythonGenerator.onetimestep">
<code class="descname">onetimestep</code><span class="sig-paren">(</span><em>stencil</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.CythonGenerator.onetimestep" title="Permalink to this definition">¶</a></dt>
<dd><p>generate the code for one time step of the Lattice Boltzmann method</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>stencil</strong> : <a class="reference internal" href="class_stencil.html#pyLBM.stencil.Stencil" title="pyLBM.stencil.Stencil"><code class="xref py py-class docutils literal"><span class="pre">Stencil</span></code></a></p>
<blockquote>
<div><p>the stencil of velocities</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>code</strong> : string</p>
<blockquote class="last">
<div><p>add the onetimestep function in the attribute <code class="docutils literal"><span class="pre">code</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyLBM.generator.CythonGenerator.relaxation">
<code class="descname">relaxation</code><span class="sig-paren">(</span><em>ns</em>, <em>stencil</em>, <em>s</em>, <em>eq</em>, <em>la</em>, <em>dtype='f8'</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.CythonGenerator.relaxation" title="Permalink to this definition">¶</a></dt>
<dd><p>generate the code of the relaxation phase</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>ns</strong> : int</p>
<blockquote>
<div><p>the number of elementary schemes</p>
</div></blockquote>
<p><strong>stencil</strong> : <a class="reference internal" href="class_stencil.html#pyLBM.stencil.Stencil" title="pyLBM.stencil.Stencil"><code class="xref py py-class docutils literal"><span class="pre">Stencil</span></code></a></p>
<blockquote>
<div><p>the stencil of velocities</p>
</div></blockquote>
<p><strong>s</strong> : list of list of double</p>
<blockquote>
<div><p>the values of the relaxation parameters</p>
</div></blockquote>
<p><strong>eq</strong> : sympy matrix</p>
<blockquote>
<div><p>the equilibrium (formally given)</p>
</div></blockquote>
<p><strong>la</strong> : double</p>
<blockquote>
<div><p>the value of the scheme velocity (dx/dt)</p>
</div></blockquote>
<p><strong>dtype</strong> : string, optional</p>
<blockquote>
<div><p>the type of the data (default &#8216;f8&#8217;)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>code</strong> : string</p>
<blockquote class="last">
<div><p>add the relaxation phase in the attribute <code class="docutils literal"><span class="pre">code</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyLBM.generator.CythonGenerator.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.CythonGenerator.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>initialization of the .pyx file to use cython</p>
</dd></dl>

<dl class="method">
<dt id="pyLBM.generator.CythonGenerator.transport">
<code class="descname">transport</code><span class="sig-paren">(</span><em>ns</em>, <em>stencil</em>, <em>dtype='double'</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.CythonGenerator.transport" title="Permalink to this definition">¶</a></dt>
<dd><p>generate the code of the transport phase</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>ns</strong> : int</p>
<blockquote>
<div><p>the number of elementary schemes</p>
</div></blockquote>
<p><strong>stencil</strong> : <a class="reference internal" href="class_stencil.html#pyLBM.stencil.Stencil" title="pyLBM.stencil.Stencil"><code class="xref py py-class docutils literal"><span class="pre">Stencil</span></code></a></p>
<blockquote>
<div><p>the stencil of velocities</p>
</div></blockquote>
<p><strong>dtype</strong> : string, optional</p>
<blockquote>
<div><p>the type of the data (default &#8216;f8&#8217;)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>code</strong> : string</p>
<blockquote class="last">
<div><p>add the transport phase in the attribute <code class="docutils literal"><span class="pre">code</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyLBM.generator.NumbaGenerator">
<em class="property">class </em><code class="descclassname">pyLBM.generator.</code><code class="descname">NumbaGenerator</code><span class="sig-paren">(</span><em>build_dir=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.NumbaGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>generate the code by using <a class="reference external" href="http://numba.pydata.org">Numba</a>,
subclass of <a class="reference internal" href="#pyLBM.generator.Generator" title="pyLBM.generator.Generator"><code class="xref py py-class docutils literal"><span class="pre">Generator</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>build_dir</strong> : string, optional</p>
<blockquote class="last">
<div><p>the directory where the code has to be written</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Not yet completely implemented</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>build_dir</td>
<td>(string) the directory where the code is written</td>
</tr>
<tr class="row-even"><td>f</td>
<td>(file identifier) the file where the code is written</td>
</tr>
<tr class="row-odd"><td>code</td>
<td>(string) the generated code</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>setup :</td>
<td>setup function to import the module numba</td>
</tr>
<tr class="row-even"><td>m2f :</td>
<td>generate the code to compute the distribution functions from the moments</td>
</tr>
<tr class="row-odd"><td>f2m :</td>
<td>generate the code to compute the moments from the distribution functions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="pyLBM.generator.NumpyGenerator">
<em class="property">class </em><code class="descclassname">pyLBM.generator.</code><code class="descname">NumpyGenerator</code><span class="sig-paren">(</span><em>build_dir=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.NumpyGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>the default generator of code,
subclass of <a class="reference internal" href="#pyLBM.generator.Generator" title="pyLBM.generator.Generator"><code class="xref py py-class docutils literal"><span class="pre">Generator</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>build_dir</strong> : string, optional</p>
<blockquote class="last">
<div><p>the directory where the code has to be written</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This generator can always be used but is not the most efficient.</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>build_dir</td>
<td>(string) the directory where the code is written</td>
</tr>
<tr class="row-even"><td>f</td>
<td>(file identifier) the file where the code is written</td>
</tr>
<tr class="row-odd"><td>code</td>
<td>(string) the generated code</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>transport :</td>
<td>generate the code of the transport phase</td>
</tr>
<tr class="row-even"><td>relaxation :</td>
<td>generate the code of the relaxation phase</td>
</tr>
<tr class="row-odd"><td>equilibrium :</td>
<td>generate the code of the equilibrium</td>
</tr>
<tr class="row-even"><td>m2f :</td>
<td>generate the code to compute the distribution functions from the moments</td>
</tr>
<tr class="row-odd"><td>f2m :</td>
<td>generate the code to compute the moments from the distribution functions</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pyLBM.generator.NumpyGenerator.equilibrium">
<code class="descname">equilibrium</code><span class="sig-paren">(</span><em>ns</em>, <em>stencil</em>, <em>eq</em>, <em>la</em>, <em>dtype='f8'</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.NumpyGenerator.equilibrium" title="Permalink to this definition">¶</a></dt>
<dd><p>generate the code of the projection on the equilibrium</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>ns</strong> : int</p>
<blockquote>
<div><p>the number of elementary schemes</p>
</div></blockquote>
<p><strong>stencil</strong> : <a class="reference internal" href="class_stencil.html#pyLBM.stencil.Stencil" title="pyLBM.stencil.Stencil"><code class="xref py py-class docutils literal"><span class="pre">Stencil</span></code></a></p>
<blockquote>
<div><p>the stencil of velocities</p>
</div></blockquote>
<p><strong>eq</strong> : sympy matrix</p>
<blockquote>
<div><p>the equilibrium (formally given)</p>
</div></blockquote>
<p><strong>la</strong> : double</p>
<blockquote>
<div><p>the value of the scheme velocity (dx/dt)</p>
</div></blockquote>
<p><strong>dtype</strong> : string, optional</p>
<blockquote>
<div><p>the type of the data (default &#8216;f8&#8217;)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>code</strong> : string</p>
<blockquote class="last">
<div><p>add the equilibrium function in the attribute <code class="docutils literal"><span class="pre">code</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyLBM.generator.NumpyGenerator.f2m">
<code class="descname">f2m</code><span class="sig-paren">(</span><em>A</em>, <em>k</em>, <em>dim</em>, <em>dtype='f8'</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.NumpyGenerator.f2m" title="Permalink to this definition">¶</a></dt>
<dd><p>generate the code to compute the moments from the distribution functions</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>A</strong> : numpy array</p>
<blockquote>
<div><p>the matrix M in the d&#8217;Humieres framework</p>
</div></blockquote>
<p><strong>k</strong> : int</p>
<blockquote>
<div><p>the number of the stencil for which the code has to be generated</p>
</div></blockquote>
<p><strong>dim</strong> : int</p>
<blockquote>
<div><p>the space dimension (unused)</p>
</div></blockquote>
<p><strong>dtype</strong> : string, optional</p>
<blockquote>
<div><p>the type of the data (default &#8216;f8&#8217;)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>code</strong> : string</p>
<blockquote class="last">
<div><p>add the f2m function in the attribute <code class="docutils literal"><span class="pre">code</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>For the NumpyGenerator, it seems to be more efficient
to generate one function per elementary scheme
because the index corresponding to the stencil is the first index.</p>
</dd></dl>

<dl class="method">
<dt id="pyLBM.generator.NumpyGenerator.m2f">
<code class="descname">m2f</code><span class="sig-paren">(</span><em>A</em>, <em>k</em>, <em>dim</em>, <em>dtype='f8'</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.NumpyGenerator.m2f" title="Permalink to this definition">¶</a></dt>
<dd><p>generate the code to compute the distribution functions from the moments</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>A</strong> : numpy array</p>
<blockquote>
<div><p>the matrix M^(-1) in the d&#8217;Humieres framework</p>
</div></blockquote>
<p><strong>k</strong> : int</p>
<blockquote>
<div><p>the number of the stencil for which the code has to be generated</p>
</div></blockquote>
<p><strong>dim</strong> : int</p>
<blockquote>
<div><p>the space dimension (unused)</p>
</div></blockquote>
<p><strong>dtype</strong> : string, optional</p>
<blockquote>
<div><p>the type of the data (default &#8216;f8&#8217;)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>code</strong> : string</p>
<blockquote class="last">
<div><p>add the m2f function in the attribute <code class="docutils literal"><span class="pre">code</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>For the NumpyGenerator, it seems to be more efficient
to generate one function per elementary scheme
because the index corresponding to the stencil is the first index.</p>
</dd></dl>

<dl class="method">
<dt id="pyLBM.generator.NumpyGenerator.relaxation">
<code class="descname">relaxation</code><span class="sig-paren">(</span><em>ns</em>, <em>stencil</em>, <em>s</em>, <em>eq</em>, <em>la</em>, <em>dtype='f8'</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.NumpyGenerator.relaxation" title="Permalink to this definition">¶</a></dt>
<dd><p>generate the code of the relaxation phase</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>ns</strong> : int</p>
<blockquote>
<div><p>the number of elementary schemes</p>
</div></blockquote>
<p><strong>stencil</strong> : <a class="reference internal" href="class_stencil.html#pyLBM.stencil.Stencil" title="pyLBM.stencil.Stencil"><code class="xref py py-class docutils literal"><span class="pre">Stencil</span></code></a></p>
<blockquote>
<div><p>the stencil of velocities</p>
</div></blockquote>
<p><strong>s</strong> : list of list of double</p>
<blockquote>
<div><p>the values of the relaxation parameters</p>
</div></blockquote>
<p><strong>eq</strong> : sympy matrix</p>
<blockquote>
<div><p>the equilibrium (formally given)</p>
</div></blockquote>
<p><strong>la</strong> : double</p>
<blockquote>
<div><p>the value of the scheme velocity (dx/dt)</p>
</div></blockquote>
<p><strong>dtype</strong> : string, optional</p>
<blockquote>
<div><p>the type of the data (default &#8216;f8&#8217;)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>code</strong> : string</p>
<blockquote class="last">
<div><p>add the relaxation phase in the attribute <code class="docutils literal"><span class="pre">code</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyLBM.generator.NumpyGenerator.transport">
<code class="descname">transport</code><span class="sig-paren">(</span><em>ns</em>, <em>stencil</em>, <em>dtype='f8'</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.NumpyGenerator.transport" title="Permalink to this definition">¶</a></dt>
<dd><p>generate the code of the transport phase</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>ns</strong> : int</p>
<blockquote>
<div><p>the number of elementary schemes</p>
</div></blockquote>
<p><strong>stencil</strong> : <a class="reference internal" href="class_stencil.html#pyLBM.stencil.Stencil" title="pyLBM.stencil.Stencil"><code class="xref py py-class docutils literal"><span class="pre">Stencil</span></code></a></p>
<blockquote>
<div><p>the stencil of velocities</p>
</div></blockquote>
<p><strong>dtype</strong> : string, optional</p>
<blockquote>
<div><p>the type of the data (default &#8216;f8&#8217;)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>code</strong> : string</p>
<blockquote class="last">
<div><p>add the transport phase in the attribute <code class="docutils literal"><span class="pre">code</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyLBM.generator.matMult">
<code class="descclassname">pyLBM.generator.</code><code class="descname">matMult</code><span class="sig-paren">(</span><em>A</em>, <em>x</em>, <em>y</em>, <em>indent=''</em>, <em>prefix=''</em>, <em>suffix=''</em><span class="sig-paren">)</span><a class="headerlink" href="#pyLBM.generator.matMult" title="Permalink to this definition">¶</a></dt>
<dd><p>return a string representing the unroll matrix vector operation y = Ax</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>A</strong> : numpy array</p>
<blockquote>
<div><p>the matrix coefficients</p>
</div></blockquote>
<p><strong>x</strong> : string</p>
<blockquote>
<div><p>input vector in a string format</p>
</div></blockquote>
<p><strong>y</strong> : string</p>
<blockquote>
<div><p>output vector in a string format where the matrix vector product is stored</p>
</div></blockquote>
<p><strong>indent</strong> : string</p>
<blockquote>
<div><p>representing spaces or tabs which are set at the beginning of each line</p>
</div></blockquote>
<p><strong>prefix</strong> : string</p>
<blockquote>
<div><p>some string to add before indices</p>
</div></blockquote>
<p><strong>suffix</strong> : string</p>
<blockquote>
<div><p>some string to add after indices</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>code</strong> : string</p>
<blockquote class="last">
<div><p>the string representing the unroll matrix vector operation y = Ax</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">matMult</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">)</span>
<span class="go">f[0] =  + m[1] + 2.0000000000000000*m[2]</span>
<span class="go">f[1] =  + 3.0000000000000000*m[0] + 4.0000000000000000*m[1] + 5.0000000000000000*m[2]</span>
<span class="go">f[2] =  - 6.0000000000000000*m[0] - 7.0000000000000000*m[1] - 8.0000000000000000*m[2]</span>
<span class="go">f[3] =  + 9.0000000000000000*m[0] + 10.0000000000000000*m[1] + 11.0000000000000000*m[2]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">matMult</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="s">&#39;    &#39;</span><span class="p">,</span> <span class="n">prefix</span> <span class="o">=</span> <span class="s">&#39;i, j, &#39;</span><span class="p">)</span>
<span class="go">    f[i, j, 0] =  + m[i, j, 1] + 2.0000000000000000*m[i, j, 2]</span>
<span class="go">    f[i, j, 1] =  + 3.0000000000000000*m[i, j, 0] + 4.0000000000000000*m[i, j, 1] + 5.0000000000000000*m[i, j, 2]</span>
<span class="go">    f[i, j, 2] =  - 6.0000000000000000*m[i, j, 0] - 7.0000000000000000*m[i, j, 1] - 8.0000000000000000*m[i, j, 2]</span>
<span class="go">    f[i, j, 3] =  + 9.0000000000000000*m[i, j, 0] + 10.0000000000000000*m[i, j, 1] + 11.0000000000000000*m[i, j, 2]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">matMult</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="s">&#39;    &#39;</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="s">&#39;, i, j&#39;</span><span class="p">)</span>
<span class="go">    f[0, i, j] =  + m[1, i, j] + 2.0000000000000000*m[2, i, j]</span>
<span class="go">    f[1, i, j] =  + 3.0000000000000000*m[0, i, j] + 4.0000000000000000*m[1, i, j] + 5.0000000000000000*m[2, i, j]</span>
<span class="go">    f[2, i, j] =  - 6.0000000000000000*m[0, i, j] - 7.0000000000000000*m[1, i, j] - 8.0000000000000000*m[2, i, j]</span>
<span class="go">    f[3, i, j] =  + 9.0000000000000000*m[0, i, j] + 10.0000000000000000*m[1, i, j] + 11.0000000000000000*m[2, i, j]</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
          </div>
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="class_scheme.html"
                        title="previous chapter">the class Scheme</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="class_simulation.html"
                        title="next chapter">the class Simulation</a></p>

        </div>
      </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2015, Benjamin Graille, Loïc Gouarin.
      </li>
      <li>
      Last updated on Feb 05, 2015.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3b2.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>